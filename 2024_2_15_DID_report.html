<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>report_feb15_2024</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="2024_2_15_DID_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="2024_2_15_DID_report_files/libs/quarto-html/quarto.js"></script>
<script src="2024_2_15_DID_report_files/libs/quarto-html/popper.min.js"></script>
<script src="2024_2_15_DID_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2024_2_15_DID_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="2024_2_15_DID_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2024_2_15_DID_report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2024_2_15_DID_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2024_2_15_DID_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2024_2_15_DID_report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="2024_2_15_DID_report_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="2024_2_15_DID_report_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">report_feb15_2024</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="didによる鉄道存廃の社会的影響の識別" class="level1">
<h1>DIDによる鉄道存廃の社会的影響の識別</h1>
<p>1980年代、国鉄特定地方交通線として指定され、その存廃が地域の決定に委ねられた出来事を自然実験としてとらえ、鉄道存廃の政策効果識別を試みる。</p>
<p>政策効果識別に当たっては、2005年の「平成の大合併」後の自治体区分を適用して推定することで、現代の自治体政策への示唆を得ることを目的とする。</p>
<section id="鉄道インフラが社会に与える影響についての因果推論" class="level2">
<h2 class="anchored" data-anchor-id="鉄道インフラが社会に与える影響についての因果推論">鉄道インフラが社会に与える影響についての因果推論</h2>
<p>日本の鉄道を含む公共交通政策は、独立採算原則の元、公的な財源配分の最小化を目標とした政策が続けられてきた。しかし、特に鉄道は費用逓減という産業特性上、赤字が避けられないために、不動産などの兼業、または都市部から地方への内部補助が大きな役割を果たしてきた。</p>
<p>さらに、兼業も内部補助も困難な地方の民間鉄道が実は企業数の大勢を占めている。（約200社中160社以上が中小民間鉄道）これらの鉄道は、第3セクターとして行政の資本参画と負担があるものも多く、その行政側の関与の目的としては、産業のもう一つの特性である、社会への外部経済のメリットを目指してのものと考えられる。</p>
<p>このような社会的な関与方針、政策が、</p>
<ul>
<li><p>その目指す効果を得られているのか、</p></li>
<li><p>「負担が大きく地域だけでは支えられない」とされる鉄道への支援が、本当に過大な負担となっているのか、</p></li>
</ul>
<p>という点について、検証を試みる。</p>
<p>国鉄末期と同様に、地方部における鉄道システムの維持可能性が、アフターコロナの大きな社会的課題として浮上している。地域社会と鉄道インフラの関係についての研究は、社会的な意義が大きいと考える。</p>
<section id="既存研究" class="level3">
<h3 class="anchored" data-anchor-id="既存研究">既存研究</h3>
<p>政策選択の結果としての鉄道システムの経済的効率性などについては十分な先行研究の蓄積があるが<span class="citation" data-cites="smith2014">(<a href="#ref-smith2014" role="doc-biblioref">Smith and Nash 2014</a>)</span>, <span class="citation" data-cites="cantos2001">(<a href="#ref-cantos2001" role="doc-biblioref">Cantos and Maudos 2001</a>)</span>, <span class="citation" data-cites="tomikawa2022">(<a href="#ref-tomikawa2022" role="doc-biblioref">Tomikawa and Goto 2022</a>)</span>, <span class="citation" data-cites="oum1999">(<a href="#ref-oum1999" role="doc-biblioref">Oum, Waters, and Yu 1999</a>)</span>, <span class="citation" data-cites="mizutani2010">(<a href="#ref-mizutani2010" role="doc-biblioref">Mizutani and Uranishi 2010</a>)</span>, <span class="citation" data-cites="xutián2004">(<a href="#ref-xutián2004" role="doc-biblioref">須田 and 依田 2004</a>)</span>、社会側から見た鉄道インフラの効果については、以下の二つの視点からの研究がある。</p>
<ul>
<li>新幹線、高速交通システム(HSR)が地価や地域の税収、生産関数に与えた影響に関する研究<span class="citation" data-cites="piàngangjiang2019">(<a href="#ref-piàngangjiang2019" role="doc-biblioref">片岡 将 et al. 2019</a>)</span>, <span class="citation" data-cites="zhúlín2024">(<a href="#ref-zhúlín2024" role="doc-biblioref">竹林, 瀬谷, and 村田 2024</a>)</span>, <span class="citation" data-cites="luòhélisuì2018">(<a href="#ref-luòhélisuì2018" role="doc-biblioref">落合, 里穂 and 寺部, 慎太郎 2018</a>)</span>, <span class="citation" data-cites="murakami2017">(<a href="#ref-murakami2017" role="doc-biblioref">Murakami and Cervero 2017</a>)</span>, <span class="citation" data-cites="wetwitoo2017">(<a href="#ref-wetwitoo2017" role="doc-biblioref">Wetwitoo and Kato 2017</a>)</span></li>
<li>廃線、駅の廃止が人口動態などに与えた影響に関する研究 <span class="citation" data-cites="qianqi2021">(<a href="#ref-qianqi2021" role="doc-biblioref">浅妻 2021</a>)</span>, <span class="citation" data-cites="yongdong">(<a href="#ref-yongdong" role="doc-biblioref">永東 et al., n.d.</a>)</span>, <span class="citation" data-cites="zhícun2022">(<a href="#ref-zhícun2022" role="doc-biblioref">植村, 松中, and 大庭 2022</a>)</span>, <span class="citation" data-cites="zhícun2021">(<a href="#ref-zhícun2021" role="doc-biblioref">植村, 松中, and 大庭 2021</a>)</span>, <span class="citation" data-cites="téngtián2022">(<a href="#ref-téngtián2022" role="doc-biblioref">藤田 2022</a>)</span>,</li>
</ul>
<p>政策効果の統計的因果推論の研究蓄積が豊富な欧米、中国では、鉄道に関する政策が、2000年代以降、交通と地域政策、都市政策のパッケージ化と路線新設という方向性が明確であり、また日本も整備新幹線については推進の方針であるため、前者の研究の蓄積が進んでいる。</p>
<p>後者はデータの制約、地域環境（過疎傾向など）の影響で、廃線などの決定に関する政策効果の統計的識別が難しい。また日本以外の諸外国では、公的関与のもとでサービスレベルを向上させる政策が主流であるため、廃線の社会的影響については国内の研究が主である、</p>
</section>
</section>
<section id="自然実験としての国鉄末期の政策選択について" class="level2">
<h2 class="anchored" data-anchor-id="自然実験としての国鉄末期の政策選択について">自然実験としての国鉄末期の政策選択について</h2>
<p>国鉄再建法により<strong>“特定地方交通路線”</strong>83路線が指定され、対象路線と駅が存在する地方自治体は、廃止または地域自治体出資による新会社による運営の選択を余儀なくされた。</p>
<section id="統計的因果推論手法による自然実験としての特性" class="level3">
<h3 class="anchored" data-anchor-id="統計的因果推論手法による自然実験としての特性">統計的因果推論手法による自然実験としての特性</h3>
<ul>
<li>条件付き交換性(Conditional exhangeability) <span class="citation" data-cites="dàjiubao2019">(<a href="#ref-dàjiubao2019" role="doc-biblioref">大久保 2019</a>)</span></li>
</ul>
<p>対象の同質性</p>
<ul>
<li>SUTVA(Stable Unit Treatment Value Assumption) <span class="citation" data-cites="imbens2015">(<a href="#ref-imbens2015" role="doc-biblioref">Imbens and Rubin 2015, 9</a> - 10)</span></li>
</ul>
<p>処置レベルに差がなく同一であり、観察されるユニット間の相互の影響がない</p>
<ul>
<li>Strongly Ignorable Treatment Assignment <span class="citation" data-cites="imbens2015">(<a href="#ref-imbens2015" role="doc-biblioref">Imbens and Rubin 2015, 39</a>)</span></li>
</ul>
<p>処置群、対象群の割り当てがランダムであり、交絡がない</p>
</section>
<section id="diddifference-in-differenceによる政策効果の推定" class="level3">
<h3 class="anchored" data-anchor-id="diddifference-in-differenceによる政策効果の推定">DID(Difference in Difference)による政策効果の推定</h3>
<p><span class="citation" data-cites="card1993 callaway2020">(<a href="#ref-card1993" role="doc-biblioref">Card and Krueger 1993</a>; <a href="#ref-callaway2020" role="doc-biblioref">Callaway 2020</a>)</span></p>
<p><span class="citation" data-cites="zhícun2021 dàpíng2019 dàpíng2019">(<a href="#ref-zhícun2021" role="doc-biblioref">植村, 松中, and 大庭 2021</a>; <a href="#ref-dàpíng2019" role="doc-biblioref">大平 2019</a>, <a href="#ref-dàpíng2019" role="doc-biblioref">2019</a>)</span></p>
<ul>
<li><p>処置群（公的関与による存続）と対照群（廃線とバス転換）が明確である</p></li>
<li><p>83路線の指定は自治体意向にかかわらず一方的な指定（割り当て）であり、この点についての自己選択バイアスは少ない。(ただし、存続か廃線かの決定については自己選択バイアスが存在する)</p></li>
<li><p>当時国は存廃決定を自治体に委ねており、地方行政の意思で政策を選択できた。このような誘導のない政策決定は日本においては稀な事例であり、政策効果の因果推論に適したテーマである。</p></li>
</ul>
<section id="att-average-treatment-effect-on-treatedの推定" class="level4">
<h4 class="anchored" data-anchor-id="att-average-treatment-effect-on-treatedの推定">ATT: Average Treatment Effect on Treatedの推定</h4>
<p>処置Dが行われた場合を<span class="math inline">\(D=1\)</span>、処置が行われなかった時を<span class="math inline">\(D=0\)</span>とした時、</p>
<p><span class="math display">\[ATT = E(Y^{1} - Y^{0} | D = 1)\]</span><br>
</p>
<p>同一個体での比較が本来は必要であるが、<span class="math inline">\(Y^{0} | D =1\)</span>の部分が反実仮想となる:</p>
<p>*RCTの状況では<span class="math inline">\(ATE = ATT = E(Y^{1}) - E(Y^{0})\)</span>である。</p>
</section>
</section>
</section>
<section id="method-and-data" class="level2">
<h2 class="anchored" data-anchor-id="method-and-data">Method and Data</h2>
<section id="two-way-fixed-effects-modelによる-attの推定" class="level3">
<h3 class="anchored" data-anchor-id="two-way-fixed-effects-modelによる-attの推定">Two Way Fixed Effects Modelによる ATTの推定</h3>
<p>DIDは共通トレンドの仮定の元で処置群(T)、対象群(C)、それぞれに<span class="math inline">\(Y_{preTreat}\)</span>と<span class="math inline">\(Y_{postTreat}\)</span>を比較sする。</p>
<p><span class="math display">\[DID = Y^1_{postTreat} - Y^1_{preTreat} - (Y^0_{postTreat} -
Y^0_{preTreat})\]</span></p>
<p>回帰式で表すと以下の処置効果<span class="math inline">\(\beta_3\)</span>を固定効果モデルで推定するとなる。</p>
<p><span class="math display">\[\begin{array}{r}
Y=\beta_0+\beta_1 {Treated }+\beta_2 { postTreat }+ \\
\beta_3{ Treated } \times{ postTreat }+\varepsilon
\end{array}\]</span></p>
<p>階差を取る（あるいはDemeaningをする)固定効果モデルとする、パネルデータの固定効果モデルと同様に時間不変の観察不可能な交絡要因を取り除ける（OVBバイアスの除去）。 <span class="math display">\[\begin{array}{r}
\Delta Y=\Delta \beta_0 + \Delta \beta_1{ Treated } + \Delta \beta_2{ postTreat }+ \\
\Delta \beta_3{ Treated } \times{postTreat }+\varepsilon
\end{array}\]</span></p>
<p><em>固定効果モデルにより各個体の異質性と時間の影響、二つのFixed effectsのコントールが可能</em></p>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<section id="gisによる対象路線駅と自治体の抽出" class="level4">
<h4 class="anchored" data-anchor-id="gisによる対象路線駅と自治体の抽出">GISによる対象路線駅と自治体の抽出</h4>
<ul>
<li>地方特定交通線に関するGISデータ</li>
</ul>
<p>国土数値情報鉄道時系列データから83の路線を抽出し、路線に含まれる駅を日本地図データ（自治体境界データ）と重ねて、これらの駅が存在した基礎自治体を抽出した。</p>
<p>https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N05-v2_0.html</p>
<ul>
<li>基礎自治体区域地図</li>
</ul>
<p>GACM地図データ https://gadm.org/maps/JPN.html</p>
<div id="fig-map" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-map-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="plot/lcl_jnr_map2.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-map-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: 地方特定交通線83路線駅の地図
</figcaption>
</figure>
</div>
<div id="tbl-trt" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-trt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: 廃線(0)および存続(1)の概要
</figcaption>
<div aria-describedby="tbl-trt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">trt_dummy</th>
<th style="text-align: right;">路線数</th>
<th style="text-align: right;">駅数</th>
<th style="text-align: right;">自治体数</th>
<th style="text-align: right;">県</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">485</td>
<td style="text-align: right;">114</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: right;">83</td>
<td style="text-align: right;">869</td>
<td style="text-align: right;">205</td>
<td style="text-align: right;">40</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</figure>
</div>
</section>
<section id="自治体に関する統計データ" class="level4">
<h4 class="anchored" data-anchor-id="自治体に関する統計データ">自治体に関する統計データ</h4>
<p>国勢調査などのデータに関し、現在の自治体区分で合併前の自治体を”合成”したデータを使用し、地方特定交通線が存在した自治体に関する人口や製造品出荷額、税収等のデータの抽出を行なった。</p>
<ul>
<li>経済財政諮問会議「選択する未来」委員会（平成26年1月設置）発表データ</li>
</ul>
<p>https://www5.cao.go.jp/keizai-shimon/kaigi/special/future/keizai-jinkou_data.html</p>
<p>全国の市区町村（2014年4月時点）について、1975年から約40年間の人口・経済関係のデータ</p>
<ul>
<li>estat 「都道府県・市区町村のすがた（社会・人口統計体系）」</li>
</ul>
<p>https://www.e-stat.go.jp/regional-statistics/ssdsview</p>
<p>1980年以降のデータが存在し、主に1990年以降のデータを目的変数として使用</p>
<section id="パネルデータ構造" class="level5">
<h5 class="anchored" data-anchor-id="パネルデータ構造">パネルデータ構造</h5>
<p>データセットは、存続・3セク化または廃止・バス転換が行われた1983年から1990年を処置期間、その前を処置前、その後2005年までを処置後とする3期間のパネル構造を基本とする。</p>
<ul>
<li><p>データセットに期間ファクター”period”と処置タイミングダミー”post”を追加</p></li>
<li><p>1975年から1983年を”period 1”, 1984-1990(treamtment period)を”period 2”, 1991-2000を”period 3”とする。</p></li>
<li><p><strong>処置タイミングはperiod 3に有効</strong>とし、“post = 1”のダミー変数を入れる。</p></li>
<li><p>“name”列を数値型とした”id”列を追加し、駅ごととなっている行の重複を取り除き、分析用のデータセット”df_did2”を作成</p></li>
</ul>
<div id="tbl-muni" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-muni-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: 自治体関連データのサマリー
</figcaption>
<div aria-describedby="tbl-muni-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 24%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">Unique (#)</th>
<th style="text-align: right;">Missing (%)</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Median</th>
<th style="text-align: right;">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">101.0</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">101.0</td>
<td style="text-align: right;">201.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1991.9</td>
<td style="text-align: right;">8.1</td>
<td style="text-align: right;">1975.0</td>
<td style="text-align: right;">1992.0</td>
<td style="text-align: right;">2005.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">agri_output</td>
<td style="text-align: right;">3298</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8323.8</td>
<td style="text-align: right;">9850.4</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">5143.5</td>
<td style="text-align: right;">69860.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">employed</td>
<td style="text-align: right;">1173</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">30505.8</td>
<td style="text-align: right;">76584.6</td>
<td style="text-align: right;">480.0</td>
<td style="text-align: right;">9278.5</td>
<td style="text-align: right;">837396.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fisical_index</td>
<td style="text-align: right;">129</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">0.2</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">0.3</td>
<td style="text-align: right;">1.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">newborn</td>
<td style="text-align: right;">1614</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">722.3</td>
<td style="text-align: right;">1641.7</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">241.0</td>
<td style="text-align: right;">18444.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">offices</td>
<td style="text-align: right;">1017</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">3668.2</td>
<td style="text-align: right;">8333.5</td>
<td style="text-align: right;">92.0</td>
<td style="text-align: right;">1230.5</td>
<td style="text-align: right;">77996.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">prdctn_output</td>
<td style="text-align: right;">5183</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">182761.1</td>
<td style="text-align: right;">644116.9</td>
<td style="text-align: right;">49.0</td>
<td style="text-align: right;">24991.0</td>
<td style="text-align: right;">11037871.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sales</td>
<td style="text-align: right;">1724</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">72755.3</td>
<td style="text-align: right;">180701.8</td>
<td style="text-align: right;">593.0</td>
<td style="text-align: right;">21199.0</td>
<td style="text-align: right;">2022503.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">taxableincome_cpt</td>
<td style="text-align: right;">5427</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2611.4</td>
<td style="text-align: right;">607.7</td>
<td style="text-align: right;">977.3</td>
<td style="text-align: right;">2693.1</td>
<td style="text-align: right;">5846.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">taxableincome_rgn</td>
<td style="text-align: right;">5426</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">72565840.4</td>
<td style="text-align: right;">184988485.8</td>
<td style="text-align: right;">594866.0</td>
<td style="text-align: right;">20175258.0</td>
<td style="text-align: right;">2020536234.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">totalpop</td>
<td style="text-align: right;">1392</td>
<td style="text-align: right;">74</td>
<td style="text-align: right;">66512.6</td>
<td style="text-align: right;">144515.1</td>
<td style="text-align: right;">1070.0</td>
<td style="text-align: right;">24689.0</td>
<td style="text-align: right;">1401279.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A4101_出生数</td>
<td style="text-align: right;">923</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">628.3</td>
<td style="text-align: right;">1451.3</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">192.0</td>
<td style="text-align: right;">13422.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">A4200_死亡数</td>
<td style="text-align: right;">1366</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">499.4</td>
<td style="text-align: right;">953.1</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">217.0</td>
<td style="text-align: right;">9205.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F2705_他市区町村への通勤者数</td>
<td style="text-align: right;">684</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">6832.2</td>
<td style="text-align: right;">30277.7</td>
<td style="text-align: right;">13.0</td>
<td style="text-align: right;">1101.0</td>
<td style="text-align: right;">337817.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">A9101_婚姻件数組</td>
<td style="text-align: right;">1151</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">394.9</td>
<td style="text-align: right;">957.2</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">124.0</td>
<td style="text-align: right;">9983.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A9201_離婚件数組</td>
<td style="text-align: right;">584</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">110.7</td>
<td style="text-align: right;">292.2</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">34.0</td>
<td style="text-align: right;">3881.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">A1303_65歳以上口</td>
<td style="text-align: right;">1159</td>
<td style="text-align: right;">78</td>
<td style="text-align: right;">10110.9</td>
<td style="text-align: right;">20340.0</td>
<td style="text-align: right;">198.0</td>
<td style="text-align: right;">4157.5</td>
<td style="text-align: right;">220985.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A6103_流出口県内他市区町村で従業・通学している口</td>
<td style="text-align: right;">707</td>
<td style="text-align: right;">86</td>
<td style="text-align: right;">7746.8</td>
<td style="text-align: right;">34889.3</td>
<td style="text-align: right;">53.0</td>
<td style="text-align: right;">1292.0</td>
<td style="text-align: right;">383435.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">K3101_交通事故発生件数件</td>
<td style="text-align: right;">1167</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">433.3</td>
<td style="text-align: right;">1291.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">16265.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">K4201_刑法犯認知件数件</td>
<td style="text-align: right;">1580</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">990.4</td>
<td style="text-align: right;">3530.1</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">201.0</td>
<td style="text-align: right;">57578.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">H110202_空き家数戸</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">99</td>
<td style="text-align: right;">4311.5</td>
<td style="text-align: right;">12308.4</td>
<td style="text-align: right;">140.0</td>
<td style="text-align: right;">1490.0</td>
<td style="text-align: right;">76700.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A1407_0～17歳口</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">12212.4</td>
<td style="text-align: right;">26690.4</td>
<td style="text-align: right;">148.0</td>
<td style="text-align: right;">4134.5</td>
<td style="text-align: right;">236085.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">E2501_小学校児童数</td>
<td style="text-align: right;">3533</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">5126.0</td>
<td style="text-align: right;">11074.7</td>
<td style="text-align: right;">52.0</td>
<td style="text-align: right;">1819.0</td>
<td style="text-align: right;">107206.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">E3501_中学校生徒数</td>
<td style="text-align: right;">2837</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2737.4</td>
<td style="text-align: right;">5864.8</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">1001.5</td>
<td style="text-align: right;">55148.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">E4501_高等学校生徒数</td>
<td style="text-align: right;">2689</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">2711.9</td>
<td style="text-align: right;">6185.2</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">836.0</td>
<td style="text-align: right;">59396.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">type</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">begin_service</td>
<td style="text-align: right;">62</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1935.0</td>
<td style="text-align: right;">21.6</td>
<td style="text-align: right;">1882.0</td>
<td style="text-align: right;">1933.0</td>
<td style="text-align: right;">1976.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">begin</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1955.3</td>
<td style="text-align: right;">7.8</td>
<td style="text-align: right;">1950.0</td>
<td style="text-align: right;">1950.0</td>
<td style="text-align: right;">1976.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">end</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1985.8</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">1982.0</td>
<td style="text-align: right;">1986.0</td>
<td style="text-align: right;">1989.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">line_length</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">51.1</td>
<td style="text-align: right;">41.5</td>
<td style="text-align: right;">1.9</td>
<td style="text-align: right;">30.6</td>
<td style="text-align: right;">148.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">pass_dnsty</td>
<td style="text-align: right;">79</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1210.6</td>
<td style="text-align: right;">721.7</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">1085.0</td>
<td style="text-align: right;">3292.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trt_year</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1986.8</td>
<td style="text-align: right;">1.7</td>
<td style="text-align: right;">1983.0</td>
<td style="text-align: right;">1987.0</td>
<td style="text-align: right;">1990.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">trt_dummy</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.4</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">area</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">381036872.7</td>
<td style="text-align: right;">329291714.6</td>
<td style="text-align: right;">7763687.6</td>
<td style="text-align: right;">286308656.3</td>
<td style="text-align: right;">1502765617.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">dist_tokyo</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">693522.9</td>
<td style="text-align: right;">291853.5</td>
<td style="text-align: right;">64044.7</td>
<td style="text-align: right;">839263.1</td>
<td style="text-align: right;">1086808.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">3.3</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">18.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">period</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">2.2</td>
<td style="text-align: right;">0.8</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">3.0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">post</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</figure>
</div>
</section>
</section>
</section>
</section>
<section id="期間pretreat0-posttreat1のみのdid推定" class="level2">
<h2 class="anchored" data-anchor-id="期間pretreat0-posttreat1のみのdid推定">2期間（preTreat=0, postTreat=1）のみのDID推定</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the names of the dependent variables</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dependent_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(df_did2)[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">19</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>)]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>dependent_vars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "agri_output"                  "employed"                    
 [3] "fisical_index"                "newborn"                     
 [5] "offices"                      "prdctn_output"               
 [7] "sales"                        "taxableincome_cpt"           
 [9] "taxableincome_rgn"            "totalpop"                    
[11] "F2705_他市区町村への通勤者数" "A9101_婚姻件数組"            
[13] "A1303_65歳以上口"             "E2501_小学校児童数"          
[15] "E3501_中学校生徒数"           "E4501_高等学校生徒数"        </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of models</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">map</span>(dependent_vars, <span class="sc">~</span> <span class="fu">feols</span>(<span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"log("</span>, .x, <span class="st">")~  post:trt_dummy | id + period"</span>)), <span class="at">data =</span> df_did2)) <span class="sc">|&gt;</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">set_names</span>(dependent_vars)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(models)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         agri_output          employed      fisical_index
Dependent Var.:     log(agri_output)     log(employed) log(fisical_index)
                                                                         
post x trt_dummy -0.0990*** (0.0263) 0.0665** (0.0249) 0.0795*** (0.0211)
Fixed-Effects:   ------------------- ----------------- ------------------
id                               Yes               Yes                Yes
period                           Yes               Yes                Yes
________________ ___________________ _________________ __________________
S.E.: Clustered               by: id            by: id             by: id
Observations                   4,412             1,005              4,221
R2                           0.98142           0.99296            0.96701
Within R2                    0.02039           0.01866            0.03654

                           newborn          offices      prdctn_output
Dependent Var.:       log(newborn)     log(offices) log(prdctn_output)
                                                                      
post x trt_dummy 0.0703** (0.0244) 0.0319. (0.0181)   0.1033. (0.0535)
Fixed-Effects:   ----------------- ---------------- ------------------
id                             Yes              Yes                Yes
period                         Yes              Yes                Yes
________________ _________________ ________________ __________________
S.E.: Clustered             by: id           by: id             by: id
Observations                 4,422            1,005              4,389
R2                         0.98748          0.99584            0.97571
Within R2                  0.01206          0.00803            0.00703

                              sales      taxableincome_cpt
Dependent Var.:          log(sales) log(taxableincome_cpt)
                                                          
post x trt_dummy 0.1221*** (0.0304)     0.0377*** (0.0068)
Fixed-Effects:   ------------------ ----------------------
id                              Yes                    Yes
period                          Yes                    Yes
________________ __________________ ______________________
S.E.: Clustered              by: id                 by: id
Observations                  1,357                  4,422
R2                          0.98973                0.85261
Within R2                   0.04120                0.00842

                      taxableincome_rgn           totalpop
Dependent Var.:  log(taxableincome_rgn)      log(totalpop)
                                                          
post x trt_dummy     0.1155*** (0.0212) 0.0732*** (0.0206)
Fixed-Effects:   ---------------------- ------------------
id                                  Yes                Yes
period                              Yes                Yes
________________ ______________________ __________________
S.E.: Clustered                  by: id             by: id
Observations                      4,422              1,206
R2                              0.98476            0.99504
Within R2                       0.02532            0.03412

                 F2705_他市区町村への通勤者数 A9101_婚姻件数組 A1303_65歳以上口
Dependent Var.:  log(F2705_他市区町村への通勤者数) log(A9101_婚姻件数組) log(A1303_65歳以上口)
                                                                          
post x trt_dummy       0.0889* (0.0356) 0.0467. (0.0255)   0.0146 (0.0118)
Fixed-Effects:   ---------------------- ---------------- -----------------
id                                  Yes              Yes               Yes
period                              Yes              Yes               Yes
________________ ______________________ ________________ _________________
S.E.: Clustered                  by: id           by: id            by: id
Observations                        620            4,220             1,005
R2                              0.99156          0.98483           0.99536
Within R2                       0.01709          0.00435           0.00173

                 E2501_小学校児童数 E3501_中学校生徒数 E4501_高等学校生徒数
Dependent Var.:  log(E2501_小学校児童数) log(E3501_中学校生徒数) log(E4501_高等学校生徒数)
                                                                       
post x trt_dummy 0.0569** (0.0209) 0.0840** (0.0254)   0.0951* (0.0400)
Fixed-Effects:   ----------------- ----------------- ------------------
id                             Yes               Yes                Yes
period                         Yes               Yes                Yes
________________ _________________ _________________ __________________
S.E.: Clustered             by: id            by: id             by: id
Observations                 4,215             4,215              3,491
R2                         0.99131           0.99013            0.97925
Within R2                  0.01236           0.02429            0.01389
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(models, <span class="at">statistic =</span>  <span class="fu">c</span>(<span class="st">"p={p.value}"</span>), <span class="at">stars =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">agri_output</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">employed</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">fisical_index</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">newborn</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">offices</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">prdctn_output</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">sales</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">taxableincome_cpt</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">taxableincome_rgn</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">totalpop</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;F2705_他市区町村への通勤者数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;A9101_婚姻件数組</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;A1303_65歳以上口</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E2501_小学校児童数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E3501_中学校生徒数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E4501_高等学校生徒数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">post × trt_dummy</td>
<td style="text-align: center;">−0.099***</td>
<td style="text-align: center;">0.066**</td>
<td style="text-align: center;">0.080***</td>
<td style="text-align: center;">0.070**</td>
<td style="text-align: center;">0.032+</td>
<td style="text-align: center;">0.103+</td>
<td style="text-align: center;">0.122***</td>
<td style="text-align: center;">0.038***</td>
<td style="text-align: center;">0.115***</td>
<td style="text-align: center;">0.073***</td>
<td style="text-align: center;">0.089*</td>
<td style="text-align: center;">0.047+</td>
<td style="text-align: center;">0.015</td>
<td style="text-align: center;">0.057**</td>
<td style="text-align: center;">0.084**</td>
<td style="text-align: center;">0.095*</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.008</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.004</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.079</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.055</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.014</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.068</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.216</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.007</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.019</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">4412</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4221</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4389</td>
<td style="text-align: center;">1357</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">1206</td>
<td style="text-align: center;">620</td>
<td style="text-align: center;">4220</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4215</td>
<td style="text-align: center;">4215</td>
<td style="text-align: center;">3491</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.981</td>
<td style="text-align: center;">0.993</td>
<td style="text-align: center;">0.967</td>
<td style="text-align: center;">0.987</td>
<td style="text-align: center;">0.996</td>
<td style="text-align: center;">0.976</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.853</td>
<td style="text-align: center;">0.985</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.992</td>
<td style="text-align: center;">0.985</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.979</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.981</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.965</td>
<td style="text-align: center;">0.987</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.975</td>
<td style="text-align: center;">0.988</td>
<td style="text-align: center;">0.846</td>
<td style="text-align: center;">0.984</td>
<td style="text-align: center;">0.994</td>
<td style="text-align: center;">0.989</td>
<td style="text-align: center;">0.984</td>
<td style="text-align: center;">0.994</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.978</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2 Within</td>
<td style="text-align: center;">0.020</td>
<td style="text-align: center;">0.019</td>
<td style="text-align: center;">0.037</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.008</td>
<td style="text-align: center;">0.007</td>
<td style="text-align: center;">0.041</td>
<td style="text-align: center;">0.008</td>
<td style="text-align: center;">0.025</td>
<td style="text-align: center;">0.034</td>
<td style="text-align: center;">0.017</td>
<td style="text-align: center;">0.004</td>
<td style="text-align: center;">0.002</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.024</td>
<td style="text-align: center;">0.014</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Within Adj.</td>
<td style="text-align: center;">0.020</td>
<td style="text-align: center;">0.017</td>
<td style="text-align: center;">0.036</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.007</td>
<td style="text-align: center;">0.007</td>
<td style="text-align: center;">0.040</td>
<td style="text-align: center;">0.008</td>
<td style="text-align: center;">0.025</td>
<td style="text-align: center;">0.033</td>
<td style="text-align: center;">0.015</td>
<td style="text-align: center;">0.004</td>
<td style="text-align: center;">0.000</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.024</td>
<td style="text-align: center;">0.014</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">−2739.8</td>
<td style="text-align: center;">−1052.7</td>
<td style="text-align: center;">−6961.8</td>
<td style="text-align: center;">−3424.2</td>
<td style="text-align: center;">−1669.9</td>
<td style="text-align: center;">2380.3</td>
<td style="text-align: center;">−995.9</td>
<td style="text-align: center;">−7318.6</td>
<td style="text-align: center;">−2368.8</td>
<td style="text-align: center;">−1950.3</td>
<td style="text-align: center;">−288.1</td>
<td style="text-align: center;">−2330.6</td>
<td style="text-align: center;">−1694.6</td>
<td style="text-align: center;">−5101.8</td>
<td style="text-align: center;">−4713.7</td>
<td style="text-align: center;">−1072.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">−1435.8</td>
<td style="text-align: center;">−50.5</td>
<td style="text-align: center;">−5666.8</td>
<td style="text-align: center;">−2119.8</td>
<td style="text-align: center;">−667.7</td>
<td style="text-align: center;">3683.2</td>
<td style="text-align: center;">62.3</td>
<td style="text-align: center;">−6014.2</td>
<td style="text-align: center;">−1064.3</td>
<td style="text-align: center;">−910.9</td>
<td style="text-align: center;">274.4</td>
<td style="text-align: center;">−1035.7</td>
<td style="text-align: center;">−692.4</td>
<td style="text-align: center;">−3807.2</td>
<td style="text-align: center;">−3419.1</td>
<td style="text-align: center;">11.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">0.17</td>
<td style="text-align: center;">0.12</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: center;">0.16</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.30</td>
<td style="text-align: center;">0.14</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: center;">0.18</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.16</td>
<td style="text-align: center;">0.17</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.13</td>
<td style="text-align: center;">0.13</td>
<td style="text-align: center;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Std.Errors</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
</tr>
<tr class="even">
<td style="text-align: left;">FE: id</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FE: period</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> + p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
</section>
<section id="期間構造pre-treatment-postを導入したモデル" class="level2">
<h2 class="anchored" data-anchor-id="期間構造pre-treatment-postを導入したモデル">3期間構造(pre, treatment, post)を導入したモデル</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 処置×期間効果の推定</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>models_3periods <span class="ot">&lt;-</span> <span class="fu">map</span>(dependent_vars, <span class="sc">~</span> <span class="fu">feols</span>(<span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">"log("</span>, .x, <span class="st">")~  i(period, trt_dummy, 2) | id + period"</span>)), <span class="at">data =</span> df_did2)) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">set_names</span>(dependent_vars)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">etable</span>(models_3periods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                              agri_output           employed
Dependent Var.:          log(agri_output)      log(employed)
                                                            
trt_dummy x period = 1 0.0736*** (0.0210) -0.0500** (0.0185)
trt_dummy x period = 3 -0.0684** (0.0227)   0.0332* (0.0154)
Fixed-Effects:         ------------------ ------------------
id                                    Yes                Yes
period                                Yes                Yes
______________________ __________________ __________________
S.E.: Clustered                    by: id             by: id
Observations                        4,412              1,005
R2                                0.98154            0.99300
Within R2                         0.02640            0.02452

                             fisical_index           newborn          offices
Dependent Var.:         log(fisical_index)      log(newborn)     log(offices)
                                                                             
trt_dummy x period = 1 -0.0600*** (0.0143)  -0.0174 (0.0148) -0.0219 (0.0138)
trt_dummy x period = 3   0.0577** (0.0189) 0.0630** (0.0214)  0.0173 (0.0106)
Fixed-Effects:         ------------------- ----------------- ----------------
id                                     Yes               Yes              Yes
period                                 Yes               Yes              Yes
______________________ ___________________ _________________ ________________
S.E.: Clustered                     by: id            by: id           by: id
Observations                         4,221             4,422            1,005
R2                                 0.96736           0.98748          0.99585
Within R2                          0.04665           0.01246          0.01014

                            prdctn_output              sales
Dependent Var.:        log(prdctn_output)         log(sales)
                                                            
trt_dummy x period = 1 -0.1181** (0.0433)   -0.0340 (0.0230)
trt_dummy x period = 3    0.0541 (0.0442) 0.1107*** (0.0293)
Fixed-Effects:         ------------------ ------------------
id                                    Yes                Yes
period                                Yes                Yes
______________________ __________________ __________________
S.E.: Clustered                    by: id             by: id
Observations                        4,389              1,357
R2                                0.97583            0.98974
Within R2                         0.01196            0.04244

                            taxableincome_cpt      taxableincome_rgn
Dependent Var.:        log(taxableincome_cpt) log(taxableincome_rgn)
                                                                    
trt_dummy x period = 1    -0.0247*** (0.0061)    -0.0897*** (0.0146)
trt_dummy x period = 3     0.0274*** (0.0057)     0.0781*** (0.0163)
Fixed-Effects:         ---------------------- ----------------------
id                                        Yes                    Yes
period                                    Yes                    Yes
______________________ ______________________ ______________________
S.E.: Clustered                        by: id                 by: id
Observations                            4,422                  4,422
R2                                    0.85290                0.98489
Within R2                             0.01036                0.03349

                                  totalpop F2705_他市区町村への通勤者数
Dependent Var.:              log(totalpop) log(F2705_他市区町村への通勤者数)
                                                                 
trt_dummy x period = 1 -0.0553*** (0.0158)      -0.0785. (0.0411)
trt_dummy x period = 3  0.0456*** (0.0131)       0.0627* (0.0283)
Fixed-Effects:         ------------------- ----------------------
id                                     Yes                    Yes
period                                 Yes                    Yes
______________________ ___________________ ______________________
S.E.: Clustered                     by: id                 by: id
Observations                         1,206                    620
R2                                 0.99511                0.99162
Within R2                          0.04872                0.02451

                       A9101_婚姻件数組 A1303_65歳以上口 E2501_小学校児童数
Dependent Var.:        log(A9101_婚姻件数組) log(A1303_65歳以上口) log(E2501_小学校児童数)
                                                                             
trt_dummy x period = 1 -0.0359* (0.0158)   0.0027 (0.0083) -0.0460** (0.0153)
trt_dummy x period = 3   0.0337 (0.0226)   0.0155 (0.0098)   0.0403* (0.0172)
Fixed-Effects:         ----------------- ----------------- ------------------
id                                   Yes               Yes                Yes
period                               Yes               Yes                Yes
______________________ _________________ _________________ __________________
S.E.: Clustered                   by: id            by: id             by: id
Observations                       4,220             1,005              4,215
R2                               0.98485           0.99536            0.99134
Within R2                        0.00560           0.00176            0.01627

                       E3501_中学校生徒数 E4501_高等学校生徒数
Dependent Var.:        log(E3501_中学校生徒数) log(E4501_高等学校生徒数)
                                                             
trt_dummy x period = 1 -0.0684*** (0.0186)   -0.0432 (0.0373)
trt_dummy x period = 3   0.0593** (0.0209)   0.0804* (0.0324)
Fixed-Effects:         ------------------- ------------------
id                                     Yes                Yes
period                                 Yes                Yes
______________________ ___________________ __________________
S.E.: Clustered                     by: id             by: id
Observations                         4,215              3,491
R2                                 0.99021            0.97928
Within R2                          0.03209            0.01523
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(models_3periods, <span class="at">statistic =</span>  <span class="fu">c</span>(<span class="st">"p={p.value}"</span>), <span class="at">stars =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: center;" data-quarto-table-cell-role="th">agri_output</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">employed</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">fisical_index</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">newborn</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">offices</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">prdctn_output</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">sales</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">taxableincome_cpt</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">taxableincome_rgn</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">totalpop</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;F2705_他市区町村への通勤者数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;A9101_婚姻件数組</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;A1303_65歳以上口</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E2501_小学校児童数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E3501_中学校生徒数</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">&nbsp;E4501_高等学校生徒数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">period = 1 × trt_dummy</td>
<td style="text-align: center;">0.074***</td>
<td style="text-align: center;">−0.050**</td>
<td style="text-align: center;">−0.060***</td>
<td style="text-align: center;">−0.017</td>
<td style="text-align: center;">−0.022</td>
<td style="text-align: center;">−0.118**</td>
<td style="text-align: center;">−0.034</td>
<td style="text-align: center;">−0.025***</td>
<td style="text-align: center;">−0.090***</td>
<td style="text-align: center;">−0.055***</td>
<td style="text-align: center;">−0.079+</td>
<td style="text-align: center;">−0.036*</td>
<td style="text-align: center;">0.003</td>
<td style="text-align: center;">−0.046**</td>
<td style="text-align: center;">−0.068***</td>
<td style="text-align: center;">−0.043</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=0.008</td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=0.241</td>
<td style="text-align: center;">p=0.114</td>
<td style="text-align: center;">p=0.007</td>
<td style="text-align: center;">p=0.140</td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=0.058</td>
<td style="text-align: center;">p=0.025</td>
<td style="text-align: center;">p=0.746</td>
<td style="text-align: center;">p=0.003</td>
<td style="text-align: center;">p=&lt;0.001</td>
<td style="text-align: center;">p=0.248</td>
</tr>
<tr class="odd">
<td style="text-align: left;">period = 3 × trt_dummy</td>
<td style="text-align: center;">−0.068**</td>
<td style="text-align: center;">0.033*</td>
<td style="text-align: center;">0.058**</td>
<td style="text-align: center;">0.063**</td>
<td style="text-align: center;">0.017</td>
<td style="text-align: center;">0.054</td>
<td style="text-align: center;">0.111***</td>
<td style="text-align: center;">0.027***</td>
<td style="text-align: center;">0.078***</td>
<td style="text-align: center;">0.046***</td>
<td style="text-align: center;">0.063*</td>
<td style="text-align: center;">0.034</td>
<td style="text-align: center;">0.015</td>
<td style="text-align: center;">0.040*</td>
<td style="text-align: center;">0.059**</td>
<td style="text-align: center;">0.080*</td>
</tr>
<tr class="even">
<td style="text-align: left; box-shadow: 0px 1.5px;"></td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.003</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.032</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.003</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.004</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.106</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.222</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=&lt;0.001</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.028</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.138</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.115</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.020</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.005</td>
<td style="text-align: center; box-shadow: 0px 1.5px;">p=0.014</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Num.Obs.</td>
<td style="text-align: center;">4412</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4221</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4389</td>
<td style="text-align: center;">1357</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">4422</td>
<td style="text-align: center;">1206</td>
<td style="text-align: center;">620</td>
<td style="text-align: center;">4220</td>
<td style="text-align: center;">1005</td>
<td style="text-align: center;">4215</td>
<td style="text-align: center;">4215</td>
<td style="text-align: center;">3491</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2</td>
<td style="text-align: center;">0.982</td>
<td style="text-align: center;">0.993</td>
<td style="text-align: center;">0.967</td>
<td style="text-align: center;">0.987</td>
<td style="text-align: center;">0.996</td>
<td style="text-align: center;">0.976</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.853</td>
<td style="text-align: center;">0.985</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.992</td>
<td style="text-align: center;">0.985</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.979</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Adj.</td>
<td style="text-align: center;">0.981</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.966</td>
<td style="text-align: center;">0.987</td>
<td style="text-align: center;">0.995</td>
<td style="text-align: center;">0.975</td>
<td style="text-align: center;">0.988</td>
<td style="text-align: center;">0.846</td>
<td style="text-align: center;">0.984</td>
<td style="text-align: center;">0.994</td>
<td style="text-align: center;">0.989</td>
<td style="text-align: center;">0.984</td>
<td style="text-align: center;">0.994</td>
<td style="text-align: center;">0.991</td>
<td style="text-align: center;">0.990</td>
<td style="text-align: center;">0.978</td>
</tr>
<tr class="even">
<td style="text-align: left;">R2 Within</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: center;">0.025</td>
<td style="text-align: center;">0.047</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.010</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.042</td>
<td style="text-align: center;">0.010</td>
<td style="text-align: center;">0.033</td>
<td style="text-align: center;">0.049</td>
<td style="text-align: center;">0.025</td>
<td style="text-align: center;">0.006</td>
<td style="text-align: center;">0.002</td>
<td style="text-align: center;">0.016</td>
<td style="text-align: center;">0.032</td>
<td style="text-align: center;">0.015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2 Within Adj.</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: center;">0.022</td>
<td style="text-align: center;">0.046</td>
<td style="text-align: center;">0.012</td>
<td style="text-align: center;">0.008</td>
<td style="text-align: center;">0.011</td>
<td style="text-align: center;">0.041</td>
<td style="text-align: center;">0.010</td>
<td style="text-align: center;">0.033</td>
<td style="text-align: center;">0.047</td>
<td style="text-align: center;">0.021</td>
<td style="text-align: center;">0.005</td>
<td style="text-align: center;">−0.001</td>
<td style="text-align: center;">0.016</td>
<td style="text-align: center;">0.032</td>
<td style="text-align: center;">0.015</td>
</tr>
<tr class="even">
<td style="text-align: left;">AIC</td>
<td style="text-align: center;">−2764.9</td>
<td style="text-align: center;">−1056.7</td>
<td style="text-align: center;">−7004.3</td>
<td style="text-align: center;">−3424.0</td>
<td style="text-align: center;">−1670.0</td>
<td style="text-align: center;">2360.5</td>
<td style="text-align: center;">−995.7</td>
<td style="text-align: center;">−7325.3</td>
<td style="text-align: center;">−2404.0</td>
<td style="text-align: center;">−1966.7</td>
<td style="text-align: center;">−290.8</td>
<td style="text-align: center;">−2333.8</td>
<td style="text-align: center;">−1692.6</td>
<td style="text-align: center;">−5116.6</td>
<td style="text-align: center;">−4745.5</td>
<td style="text-align: center;">−1075.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BIC</td>
<td style="text-align: center;">−1454.6</td>
<td style="text-align: center;">−49.6</td>
<td style="text-align: center;">−5703.0</td>
<td style="text-align: center;">−2113.1</td>
<td style="text-align: center;">−662.9</td>
<td style="text-align: center;">3669.8</td>
<td style="text-align: center;">67.8</td>
<td style="text-align: center;">−6014.4</td>
<td style="text-align: center;">−1093.2</td>
<td style="text-align: center;">−922.2</td>
<td style="text-align: center;">276.2</td>
<td style="text-align: center;">−1032.6</td>
<td style="text-align: center;">−685.5</td>
<td style="text-align: center;">−3815.5</td>
<td style="text-align: center;">−3444.5</td>
<td style="text-align: center;">14.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">RMSE</td>
<td style="text-align: center;">0.17</td>
<td style="text-align: center;">0.12</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: center;">0.16</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.30</td>
<td style="text-align: center;">0.14</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: center;">0.18</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.16</td>
<td style="text-align: center;">0.17</td>
<td style="text-align: center;">0.09</td>
<td style="text-align: center;">0.13</td>
<td style="text-align: center;">0.13</td>
<td style="text-align: center;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Std.Errors</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
<td style="text-align: center;">by: id</td>
</tr>
<tr class="even">
<td style="text-align: left;">FE: id</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FE: period</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
</tbody><tfoot>
<tr class="even">
<td style="text-align: left; padding: 0;"><sup></sup> + p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>


</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iplot</span>(models_3periods, <span class="at">main =</span><span class="st">" Effect on log(dependent vars)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2024_2_15_DID_report_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="doubly-robust-did" class="level2">
<h2 class="anchored" data-anchor-id="doubly-robust-did">Doubly Robust DID</h2>
<p><span class="citation" data-cites="santanna2020">(<a href="#ref-santanna2020" role="doc-biblioref">Sant’Anna and Zhao 2020</a>)</span></p>
<p>データを年ごとにグループ化してネストさせる</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nested_data <span class="ot">&lt;-</span> df_did2 <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>nested_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 2
# Groups:   year [27]
    year data               
   &lt;dbl&gt; &lt;list&gt;             
 1  1975 &lt;tibble [201 × 47]&gt;
 2  1980 &lt;tibble [201 × 47]&gt;
 3  1981 &lt;tibble [201 × 47]&gt;
 4  1982 &lt;tibble [201 × 47]&gt;
 5  1983 &lt;tibble [201 × 47]&gt;
 6  1984 &lt;tibble [201 × 47]&gt;
 7  1985 &lt;tibble [201 × 47]&gt;
 8  1986 &lt;tibble [201 × 47]&gt;
 9  1987 &lt;tibble [201 × 47]&gt;
10  1988 &lt;tibble [201 × 47]&gt;
# ℹ 17 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>nested_data<span class="sc">$</span>data[[<span class="dv">17</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 201 × 47
      id name  agri_output employed fisical_index newborn offices prdctn_output
   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;
 1    45 北海…       23860       NA          0.53    1868      NA        114577
 2    34 北海…       35250       NA          0.42    1238      NA        144180
 3    44 北海…       26710       NA          0.38     774      NA         69524
 4    74 北海…       17130       NA          0.4      414      NA         39015
 5    67 北海…        1130       NA          0.38     240      NA         35689
 6    72 北海…        6030       NA          0.35     392      NA         68006
 7    73 北海…        5630       NA          0.32     232      NA         58011
 8    37 北海…       14000       NA          0.24     227      NA         20485
 9    35 北海…       10800       NA          0.26     358      NA         21369
10    19 北海…        2030       NA          0.17      64      NA         29791
# ℹ 191 more rows
# ℹ 39 more variables: sales &lt;dbl&gt;, taxableincome_cpt &lt;dbl&gt;,
#   taxableincome_rgn &lt;dbl&gt;, totalpop &lt;dbl&gt;, A4101_出生数 &lt;dbl&gt;,
#   A4200_死亡数 &lt;dbl&gt;, F2705_他市区町村への通勤者数 &lt;dbl&gt;,
#   A9101_婚姻件数組 &lt;dbl&gt;, A9201_離婚件数組 &lt;dbl&gt;, A1303_65歳以上口 &lt;dbl&gt;,
#   `A6103_流出口県内他市区町村で従業・通学している口` &lt;dbl&gt;,
#   K3101_交通事故発生件数件 &lt;dbl&gt;, K4201_刑法犯認知件数件 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>DRDIDパッケージは2期間データのみ扱えるため、処置前として1980年、処置後として1995年のデータによりATTを推定する。</p>
<ul>
<li>出生数についての推定</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>nb_did_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(nested_data<span class="sc">$</span>data[[<span class="dv">2</span>]] ,nested_data<span class="sc">$</span>data[[<span class="dv">17</span>]]) </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>nb_drdid<span class="ot">&lt;-</span> <span class="fu">drdid</span>(<span class="at">yname =</span> <span class="st">"newborn"</span>, <span class="at">idname =</span> <span class="st">"id"</span>, <span class="at">tname =</span> <span class="st">"post"</span>, <span class="at">dname =</span> <span class="st">"trt_dummy"</span>, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">xformla =</span> <span class="sc">~</span> <span class="fu">log</span>(area) <span class="sc">+</span> <span class="fu">log</span>(dist_tokyo) <span class="sc">+</span> <span class="fu">log</span>(count),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> nb_did_df,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel =</span> <span class="cn">TRUE</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                   )</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nb_drdid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Call:
drdid(yname = "newborn", tname = "post", idname = "id", dname = "trt_dummy", 
    xformla = ~log(area) + log(dist_tokyo) + log(count), data = nb_did_df, 
    panel = TRUE)
------------------------------------------------------------------
 Further improved locally efficient DR DID estimator for the ATT:
 
   ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] 
 403.4738    219.06     1.8418     0.0655    -25.8839   832.8315 
------------------------------------------------------------------
 Estimator based on panel data.
 Outcome regression est. method: weighted least squares.
 Propensity score est. method: inverse prob. tilting.
 Analytical standard error.
------------------------------------------------------------------
 See Sant'Anna and Zhao (2020) for details.</code></pre>
</div>
</div>
<ul>
<li>人口についての推定</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>drdid<span class="ot">&lt;-</span> <span class="fu">drdid</span>(<span class="at">yname =</span> <span class="st">"E3501_中学校生徒数"</span>, <span class="at">idname =</span> <span class="st">"id"</span>, <span class="at">tname =</span> <span class="st">"post"</span>, <span class="at">dname =</span> <span class="st">"trt_dummy"</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">xformla =</span> <span class="sc">~</span> <span class="fu">log</span>(area) <span class="sc">+</span> <span class="fu">log</span>(dist_tokyo) <span class="sc">+</span> <span class="fu">log</span>(count),</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> nb_did_df,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel =</span> <span class="cn">TRUE</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                   )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in pre_process_drdid(yname = yname, tname = tname, idname = idname, :
Some outcomes are missing (NA). We are dropping those observations</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in y1 - y0: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(drdid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Call:
drdid(yname = "E3501_中学校生徒数", tname = "post", idname = "id", 
    dname = "trt_dummy", xformla = ~log(area) + log(dist_tokyo) + 
        log(count), data = nb_did_df, panel = TRUE)
------------------------------------------------------------------
 Further improved locally efficient DR DID estimator for the ATT:
 
   ATT     Std. Error  t value    Pr(&gt;|t|)  [95% Conf. Interval] 
-3475.0107 2571.8694   -1.3512     0.1766   -8515.8748 1565.8534 
------------------------------------------------------------------
 Estimator based on panel data.
 Outcome regression est. method: weighted least squares.
 Propensity score est. method: inverse prob. tilting.
 Analytical standard error.
------------------------------------------------------------------
 See Sant'Anna and Zhao (2020) for details.</code></pre>
</div>
</div>

</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-callaway2020" class="csl-entry" role="listitem">
Callaway, Brantly. 2020. <span>“Difference-in-Differences for Policy Evaluation.”</span> In, edited by Klaus F Zimmermann, 161. Cham: Springer International Publishing.
</div>
<div id="ref-cantos2001" class="csl-entry" role="listitem">
Cantos, Pedro, and Joaquıń Maudos. 2001. <span>“Regulation and Efficiency: The Case of European Railways.”</span> <em>Transportation Research Part A: Policy and Practice</em> 35 (5): 459472.
</div>
<div id="ref-card1993" class="csl-entry" role="listitem">
Card, David, and Alan B Krueger. 1993. <span>“Minimum Wages and Employment: A Case Study of the Fast Food Industry in New Jersey and Pennsylvania.”</span>
</div>
<div id="ref-imbens2015" class="csl-entry" role="listitem">
Imbens, Guido W, and Donald B Rubin. 2015. <em>Causal Inference in Statistics, Social, and Biomedical Sciences</em>. Cambridge University Press.
</div>
<div id="ref-mizutani2010" class="csl-entry" role="listitem">
Mizutani, and Uranishi. 2010. <span>“Effects of Regulatory and Competition Policy on Performance: An Empirical Analysis of OECD Members’ Rail Industries.”</span> <em>B.kobe-u.ac.jp</em>.
</div>
<div id="ref-murakami2017" class="csl-entry" role="listitem">
Murakami, Jin, and Robert Cervero. 2017. <span>“High-Speed Rail and Economic Development: Business Agglomerations and Policy Implications.”</span> In, 244271. Routledge.
</div>
<div id="ref-oum1999" class="csl-entry" role="listitem">
Oum, Tae Hoon, W G Waters, and Chunyan Yu. 1999. <span>“A Survey of Productivity and Efficiency Measurement in Rail Transport.”</span> <em>Journal of Transport Economics and Policy</em> 33 (1): 942.
</div>
<div id="ref-santanna2020" class="csl-entry" role="listitem">
Sant’Anna, Pedro H C, and Jun Zhao. 2020. <span>“Doubly Robust Difference-in-Differences Estimators.”</span> <em>Journal of Econometrics</em> 219 (1): 101122.
</div>
<div id="ref-smith2014" class="csl-entry" role="listitem">
Smith, Andrew S J, and Christopher Nash. 2014. <span>“Rail Efficiency: Cost Research and Its Implications for Policy.”</span>
</div>
<div id="ref-tomikawa2022" class="csl-entry" role="listitem">
Tomikawa, Tadaaki, and Mika Goto. 2022. <span>“Efficiency Assessment of Japanese National Railways Before and After Privatization and Divestiture Using Data Envelopment Analysis.”</span> <em>Transport Policy</em> 118 (March): 4455.
</div>
<div id="ref-wetwitoo2017" class="csl-entry" role="listitem">
Wetwitoo, Jetpan, and Hironori Kato. 2017. <span>“High-Speed Rail and Regional Economic Productivity Through Agglomeration and Network Externality: A Case Study of Inter-Regional Transportation in Japan.”</span> <em>Case Studies on Transport Policy</em> 5 (4): 549559.
</div>
<div id="ref-dàjiubao2019" class="csl-entry" role="listitem">
大久保将貴. 2019. <span>“因果推論の道具箱.”</span> <em>理論と方法</em> 34 (1): 2034.
</div>
<div id="ref-dàpíng2019" class="csl-entry" role="listitem">
大平悠季. 2019. <span>“交通インフラ整備効果の因果推論: 論点整理と展望.”</span> <em>土木学会論文集 D3 (土木計画学)</em>.
</div>
<div id="ref-zhícun2021" class="csl-entry" role="listitem">
植村洋史, 松中亮治, and 大庭哲治. 2021. <span>“地方鉄道の存廃が駅勢圏人口に及ぼす因果的影響の分析.”</span> <em>土木学会論文集d3（土木計画学）</em> 76 (5): I_1127I_1135.
</div>
<div id="ref-zhícun2022" class="csl-entry" role="listitem">
———. 2022. <span>“傾向スコアマッチングを用いた地方鉄道の存廃が駅勢圏における年齢階層別人口の社会増減に及ぼす影響.”</span> <em>土木学会論文集d3（土木計画学）</em> 78 (6): II_168II_181.
</div>
<div id="ref-yongdong" class="csl-entry" role="listitem">
永東功嗣, 中川大, 松中亮治, 大庭哲治, and 松原光也. n.d. <span>“地方鉄道の存廃が駅勢圏人口の経年的変化に及ぼす影響に関する研究.”</span> <em>土木計画学研究・講演集</em>.
</div>
<div id="ref-qianqi2021" class="csl-entry" role="listitem">
浅妻裕. 2021. <span>“鉄道路線存廃と人口推移の関係についての試論.”</span>
</div>
<div id="ref-piàngangjiang2019" class="csl-entry" role="listitem">
片岡 将, 柳川 篤志, 田中 皓介, 川端 祐一郎, and 藤井 聡. 2019. <span>“全国新幹線整備が国土構造と国民経済にもたらす影響の計量分析.”</span> <em>土木学会論文集d3（土木計画学）</em> 75 (5): I_375I_386.
</div>
<div id="ref-zhúlín2024" class="csl-entry" role="listitem">
竹林幹人, 瀬谷創, and 村田祥之. 2024. <span>“新幹線駅の新設が市区町村の人口に与えた影響-Synthetic Control Method を用いて-.”</span> <em>応用地域学研究</em> 2023 (27): 116.
</div>
<div id="ref-luòhélisuì2018" class="csl-entry" role="listitem">
落合, 里穂, and 寺部, 慎太郎. 2018. <span>“傾向スコアを用いた新幹線が沿線自治体の人口に与える影響の評価.”</span> <em>交通・物流部門大会講演論文集</em> 2018.27: 2602.
</div>
<div id="ref-téngtián2022" class="csl-entry" role="listitem">
藤田知也. 2022. <span>“北海道における鉄道廃止の影響に関する一考察-年齢階級別人口の変化に着目して.”</span>
</div>
<div id="ref-xutián2004" class="csl-entry" role="listitem">
須田昌弥, and 依田高典. 2004. <span>“民営化後の JR6 社の密度・範囲の経済性ならびに地域間費用格差.”</span> <em>運輸政策研究</em> 7 (1): 034042.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>